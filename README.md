# My Encrypt Tool

## Обзор

`my_encrypt_tool` — это утилита командной строки, предназначенная для преобразования файлов на основе словаря байтовых преобразований. Утилита поддерживает два режима: прямое и обратное преобразование. Словарь преобразований указывает, как отображать входные байты в выходные байты.

## Структура директории

```
my_encrypt_tool/
├── CMakeLists.txt
├── src/
│   ├── CMakeLists.txt
│   ├── main.cpp
│   ├── dictionary.cpp
│   ├── dictionary.h
│   ├── transformer.cpp
│   ├── transformer.h
├── include/
│   └── constants.h
├── tests/
│   ├── CMakeLists.txt
│   ├── test_main.cpp
│   ├── test_dictionary.cpp
│   └── test_transformer.cpp
├── data/
│   └── example_dictionary.txt
├── input.txt
├── output.txt
└── README.md
```

## Инструкции по сборке

1. **Установите зависимости**: Убедитесь, что `cmake` и компилятор C++ (`gcc` или `clang`) установлены.
2. **Клонируйте репозиторий**: Склонируйте репозиторий на ваш локальный компьютер.
3. **Соберите проект**:
   ```sh
   mkdir build
   cd build
   cmake ..
   make
   ```
4. **Запустите программу на ваших данных**:
   ```sh
   ./my_encrypt_tool --mode=direct --dictionary=data/example_dictionary.txt --input_file=input.txt --output_file=output.txt
   ```

## Использование

### Аргументы командной строки

- `--mode=<direct|reverse>`: Указывает режим преобразования.
- `--dictionary=/path/to/dictionary`: Путь к файлу словаря.
- `--input_file=/path/to/input_file`: Путь к входному файлу, который нужно преобразовать.
- `--output_file=/path/to/output_file`: Путь к выходному файлу, в который будет сохранен преобразованный данные.

### Примеры

- **Прямой режим**:
  ```sh
  ./my_encrypt_tool --mode=direct --dictionary=my_dictionary --input_file=input.txt --output_file=output.txt
  ```
- **Обратный режим**:
  ```sh
  ./my_encrypt_tool --mode=reverse --dictionary=my_dictionary --input_file=input.txt --output_file=output.txt
  ```

## Формат словаря

Файл словаря должен содержать отображения в следующем формате:
```
0x<input_byte_as_hex_string> -> 0x<output_byte_as_hex_string>
```
Каждое отображение должно быть на новой строке. Если преобразование байта не указано, байт остается неизменным.

### Пример словаря

```
0xAA -> 0xBB
0xBB -> 0xCC
0xCC -> 0xAA
```

## Обработка ошибок

- **Недопустимые аргументы**: Если отсутствуют или недопустимы аргументы, утилита выведет сообщение об ошибке и завершит работу.
- **Ошибки файлов**: Если не удается открыть файлы словаря или входные файлы, утилита выведет сообщение об ошибке и завершит работу.
- **Недопустимый формат словаря**: Если файл словаря содержит недопустимые данные, утилита выведет сообщение об ошибке и завершит работу.
- **Дублирующиеся ключи**: Если в словаре найдены дублирующиеся ключи, утилита выведет сообщение об ошибке и завершит работу.

## Обзор исходного кода

### Основная программа (`src/main.cpp`)

Обрабатывает аргументы командной строки, загружает словарь и преобразует входной файл.

### Загрузка словаря (`src/dictionary.cpp` и `src/dictionary.h`)

Функции для загрузки словаря преобразований из файла.

### Преобразование файла (`src/transformer.cpp` и `src/transformer.h`)

Функции для выполнения побайтного преобразования входного файла на основе словаря.

### Константы (`include/constants.h`)

Определяет константы, используемые в программе, такие как префиксы аргументов и режимы.

## Тестирование

Тесты написаны с использованием фреймворка GoogleTest. Тестовые случаи покрывают различные сценарии, включая допустимые и недопустимые форматы словаря, дублирующиеся ключи и оба режима преобразования.

### Запуск тестов

1. **Соберите тесты**:
   ```sh
   mkdir build
   cd build
   cmake ..
   make
   ```
2. **Запустите тесты**:
   ```sh
   ./tests/run_tests
   ```

### Тестовые файлы

- **Основной тест** (`tests/test_main.cpp`): Инициализирует GoogleTest.
- **Тест словаря** (`tests/test_dictionary.cpp`): Тесты для функциональности загрузки словаря.
- **Тест трансформации** (`tests/test_transformer.cpp`): Тесты для функциональности преобразования файла.

## Пример файлов

- `data/example_dictionary.txt`: Пример файла словаря.
- `input.txt`: Пример входного файла.
- `output.txt`: Пример выходного файла (генерируется после запуска утилиты).

## Авторы

Тихонов Евгений Павлович
